var e,t,n,r,o,l,a={},i=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,n){var r,o=arguments,l={};for(r in t)"key"!==r&&"ref"!==r&&(l[r]=t[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(l.children=n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===l[r]&&(l[r]=e.defaultProps[r]);return f(e,l,t&&t.key,t&&t.ref,null)}function f(t,n,r,o,l){var a={type:t,props:n,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:l};return null==l&&(a.__v=a),e.vnode&&e.vnode(a),a}function v(e){return e.children}function p(e,t){this.props=e,this.context=t}function h(e,t){if(null==t)return e.__?h(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?h(e):null}function g(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return g(e)}}function m(l){(!l.__d&&(l.__d=!0)&&t.push(l)&&!n++||o!==e.debounceRendering)&&((o=e.debounceRendering)||r)(w)}function w(){for(var e;n=t.length;)e=t.sort((function(e,t){return e.__v.__b-t.__v.__b})),t=[],e.some((function(e){var t,n,r,o,l,a,i;e.__d&&(a=(l=(t=e).__v).__e,(i=t.__P)&&(n=[],(r=c({},l)).__v=r,o=C(i,l,r,t.__n,void 0!==i.ownerSVGElement,null,n,null==a?h(l):a),S(n,l),o!=a&&g(l)))}))}function y(e,t,n,r,o,l,s,c,u){var f,v,p,g,m,w,y,b=n&&n.__k||i,x=b.length;if(c==a&&(c=null!=l?l[0]:x?h(n,0):null),f=0,t.__k=_(t.__k,(function(n){if(null!=n){if(n.__=t,n.__b=t.__b+1,null===(p=b[f])||p&&n.key==p.key&&n.type===p.type)b[f]=void 0;else for(v=0;v<x;v++){if((p=b[v])&&n.key==p.key&&n.type===p.type){b[v]=void 0;break}p=null}if(g=C(e,n,p=p||a,r,o,l,s,c,u),(v=n.ref)&&p.ref!=v&&(y||(y=[]),p.ref&&y.push(p.ref,null,n),y.push(v,n.__c||g,n)),null!=g){var i;if(null==w&&(w=g),void 0!==n.__d)i=n.__d,n.__d=void 0;else if(l==p||g!=c||null==g.parentNode){e:if(null==c||c.parentNode!==e)e.appendChild(g),i=null;else{for(m=c,v=0;(m=m.nextSibling)&&v<x;v+=2)if(m==g)break e;e.insertBefore(g,c),i=c}"option"==t.type&&(e.value="")}c=void 0!==i?i:g.nextSibling,"function"==typeof t.type&&(t.__d=c)}else c&&p.__e==c&&c.parentNode!=e&&(c=h(p))}return f++,n})),t.__e=w,null!=l&&"function"!=typeof t.type)for(f=l.length;f--;)null!=l[f]&&d(l[f]);for(f=x;f--;)null!=b[f]&&P(b[f],b[f]);if(y)for(f=0;f<y.length;f++)D(y[f],y[++f],y[++f])}function _(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)_(e[r],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?f(null,e,null,null,e):null!=e.__e||null!=e.__c?f(e.type,e.props,e.key,null,e.__v):e):e);return n}function b(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===s.test(t)?n+"px":null==n?"":n}function x(e,t,n,r,o){var l,a,i,s,c;if(o?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(l=e.style,"string"==typeof n)l.cssText=n;else{if("string"==typeof r&&(l.cssText="",r=null),r)for(s in r)n&&s in n||b(l,s,"");if(n)for(c in n)r&&n[c]===r[c]||b(l,c,n[c])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),i=t.toLowerCase(),t=(i in e?i:t).slice(2),n?(r||e.addEventListener(t,k,a),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,k,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function k(t){this.l[t.type](e.event?e.event(t):t)}function C(t,n,r,o,l,a,i,s,d){var u,f,h,g,m,w,_,b,x,k,C=n.type;if(void 0!==n.constructor)return null;(u=e.__b)&&u(n);try{e:if("function"==typeof C){if(b=n.props,x=(u=C.contextType)&&o[u.__c],k=u?x?x.props.value:u.__:o,r.__c?_=(f=n.__c=r.__c).__=f.__E:("prototype"in C&&C.prototype.render?n.__c=f=new C(b,k):(n.__c=f=new p(b,k),f.constructor=C,f.render=I),x&&x.sub(f),f.props=b,f.state||(f.state={}),f.context=k,f.__n=o,h=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=C.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=c({},f.__s)),c(f.__s,C.getDerivedStateFromProps(b,f.__s))),g=f.props,m=f.state,h)null==C.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==C.getDerivedStateFromProps&&b!==g&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(b,k),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(b,f.__s,k)||n.__v===r.__v&&!f.__){for(f.props=b,f.state=f.__s,n.__v!==r.__v&&(f.__d=!1),f.__v=n,n.__e=r.__e,n.__k=r.__k,f.__h.length&&i.push(f),u=0;u<n.__k.length;u++)n.__k[u]&&(n.__k[u].__=n);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(b,f.__s,k),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(g,m,w)}))}f.context=k,f.props=b,f.state=f.__s,(u=e.__r)&&u(n),f.__d=!1,f.__v=n,f.__P=t,u=f.render(f.props,f.state,f.context),n.__k=null!=u&&u.type==v&&null==u.key?u.props.children:Array.isArray(u)?u:[u],null!=f.getChildContext&&(o=c(c({},o),f.getChildContext())),h||null==f.getSnapshotBeforeUpdate||(w=f.getSnapshotBeforeUpdate(g,m)),y(t,n,r,o,l,a,i,s,d),f.base=n.__e,f.__h.length&&i.push(f),_&&(f.__E=f.__=null),f.__e=!1}else null==a&&n.__v===r.__v?(n.__k=r.__k,n.__e=r.__e):n.__e=A(r.__e,n,r,o,l,a,i,d);(u=e.diffed)&&u(n)}catch(t){n.__v=null,e.__e(t,n,r)}return n.__e}function S(t,n){e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(e){e.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function A(e,t,n,r,o,l,s,c){var d,u,f,v,p,h=n.props,g=t.props;if(o="svg"===t.type||o,null!=l)for(d=0;d<l.length;d++)if(null!=(u=l[d])&&((null===t.type?3===u.nodeType:u.localName===t.type)||e==u)){e=u,l[d]=null;break}if(null==e){if(null===t.type)return document.createTextNode(g);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,g.is&&{is:g.is}),l=null,c=!1}if(null===t.type)h!==g&&e.data!=g&&(e.data=g);else{if(null!=l&&(l=i.slice.call(e.childNodes)),f=(h=n.props||a).dangerouslySetInnerHTML,v=g.dangerouslySetInnerHTML,!c){if(h===a)for(h={},p=0;p<e.attributes.length;p++)h[e.attributes[p].name]=e.attributes[p].value;(v||f)&&(v&&f&&v.__html==f.__html||(e.innerHTML=v&&v.__html||""))}(function(e,t,n,r,o){var l;for(l in n)"children"===l||"key"===l||l in t||x(e,l,null,n[l],r);for(l in t)o&&"function"!=typeof t[l]||"children"===l||"key"===l||"value"===l||"checked"===l||n[l]===t[l]||x(e,l,t[l],n[l],r)})(e,g,h,o,c),v?t.__k=[]:(t.__k=t.props.children,y(e,t,n,r,"foreignObject"!==t.type&&o,l,s,a,c)),c||("value"in g&&void 0!==(d=g.value)&&d!==e.value&&x(e,"value",d,h.value,!1),"checked"in g&&void 0!==(d=g.checked)&&d!==e.checked&&x(e,"checked",d,h.checked,!1))}return e}function D(t,n,r){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,r)}}function P(t,n,r){var o,l,a;if(e.unmount&&e.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||D(o,null,n)),r||"function"==typeof t.type||(r=null!=(l=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){e.__e(t,n)}o.base=o.__P=null}if(o=t.__k)for(a=0;a<o.length;a++)o[a]&&P(o[a],n,r);null!=l&&d(l)}function I(e,t,n){return this.constructor(e,n)}e={__e:function(e,t){for(var n,r;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(e)),r)return m(n.__E=n)}catch(t){e=t}throw e}},p.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&c(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),m(this))},p.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),m(this))},p.prototype.render=v,t=[],n=0,r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=a;var M=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.min(t,n,r),l=Math.max(t,n,r),a=l-o,i=0,s=0,c=0;return i=0===a?0:l===t?(n-r)/a%6:l===n?(r-t)/a+2:(t-n)/a+4,(i=Math.round(60*i))<0&&(i+=360),c=(l+o)/2,s=+(100*(s=0===a?0:a/(1-Math.abs(2*c-1)))).toFixed(1),c=+(100*c).toFixed(1),[Math.floor(i),Math.floor(s),Math.floor(c),255]},E={},T={render:void 0},z=["canvasSelection","canvasPreview","canvasTemp","canvasFinal","canvasView"],q=function(){z.forEach((function(e){T[e].dom="canvasView"===e?document.querySelector("#canvas-view"):document.createElement("canvas"),T[e].dom.width=E.width,T[e].dom.height=E.height,T[e].ctx=T[e].dom.getContext("2d"),T[e].imgData=T[e].ctx.getImageData(0,0,E.width,E.height)}))},L=function(e,t,n){!function(e,t){E.width=e,E.height=t,E.tool="pencil",E.frameActive=0,E.layerActive=0,E.frameCount=1,E.layerCount=1,E.layers=[{name:"Layer 1",hidden:!1,frames:[new ImageData(e,t)]}],E.color={},E.color.rgb=[100,188,156,255],E.color.hsl=M(E.color.rgb),E.palette=[[26,188,156,255],[46,204,113,255],[52,152,219,255],[155,89,182,255],[52,73,94,255],[22,160,133,255],[39,174,96,255],[41,128,185,255],[142,68,173,255],[44,62,80,255],[241,196,15,255],[230,126,34,255],[231,76,60,255],[236,240,241,255],[149,165,166,255],[243,156,18,255],[211,84,0,255],[192,57,43,255],[189,195,199,255],[127,140,141,255]],Object.seal(E)}(e,t),function(e){T.file={open:!1},T.color={open:!1},T.newCanvas={open:!1,w:32,h:32},T.downloadCanvas={open:!1,size:2,type:"frame"},T.window={request:"",mouseDown:!1,startX:0,startY:0,prevX:0,prevY:0,currX:0,currY:0},T.brushSize=0,T.timerID=void 0,T.isPlaying=!1,T.onionSkinning=!1,T.undo=[],T.undoPos=-1,T.currUndoRef={},z.forEach((function(e){T[e]={dom:void 0,ctx:void 0,imgData:void 0}})),!0!==e&&q(),Object.seal(T)}(n)},X=function(e,t){void 0===t&&(t=""),T.undo.splice(0,T.undoPos+1,{icon:e+".svg",action:e+" "+t,undo:Y,redo:R}),T.undoPos>=0&&(T.undoPos=-1),T.undo.length>50&&T.undo.pop(),T.currUndoRef=T.undo[T.undoPos+1]},Y=function(){T.undoPos+1!==T.undo.length&&(T.undoPos+=1,T.undo[T.undoPos].undo(),T.render())},R=function(){T.undoPos-1!=-2&&(T.undo[T.undoPos].redo&&T.undo[T.undoPos].redo(),T.undoPos-=1,T.render())},U=function(e){E.color.hsl=e,E.color.rgb=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,o=(1-Math.abs(2*r-1))*n,l=o*(1-Math.abs(e[0]/60%2-1)),a=r-o/2,i=0,s=0,c=0;return t>=0&&t<60?(i=o,s=l,c=0):t>=60&&t<120?(i=l,s=o,c=0):t>=120&&t<180?(i=0,s=o,c=l):t>=180&&t<240?(i=0,s=l,c=o):t>=240&&t<300?(i=l,s=0,c=o):t>=300&&t<360&&(i=o,s=0,c=l),[i=Math.round(255*(i+a)),s=Math.round(255*(s+a)),c=Math.round(255*(c+a)),255]}(e),T.render()},N=function(e){E.color.rgb=e,E.color.hsl=M(e),T.render()},V=function(){return u("div",null,u("div",{class:"h-30 bg-mid bord-dark-b fl fl-center-y p-h-10"},u("small",null,u("b",null,"Color"))),u("div",{class:"fl fl-justify-between"},u("div",{class:"fl-1 fl fl-center-y p-h-10 bord-dark-b h-30 bord-dark-b"},u("div",{class:"no-ptr h-30",style:"min-height: 18px; width: 18px; border-radius: 100%; background: rgba("+E.color.rgb[0]+", "+E.color.rgb[1]+", "+E.color.rgb[2]+", 255);"})),u("div",{class:"fl bord-dark-b h-30"},0===E.palette.filter((function(e){return E.color.rgb[0]===e[0]&&E.color.rgb[1]===e[1]&&E.color.rgb[2]===e[2]&&E.color.rgb[3]===e[3]})).length&&u("button",{onClick:function(){E.palette.push(E.color.rgb),T.render()},class:"w-30 fl fl-center rel bord-dark-l"},u("img",{src:"img/insert.svg"})),0!==E.palette.filter((function(e){return E.color.rgb[0]===e[0]&&E.color.rgb[1]===e[1]&&E.color.rgb[2]===e[2]&&E.color.rgb[3]===e[3]})).length&&u("button",{onClick:function(){var e;-1!==(e=E.palette.indexOf(E.color.rgb))&&(E.palette.splice(e,1),T.render())},class:"w-30 fl fl-center bord-dark-l"},u("img",{src:"img/delete.svg"})))),u("div",{onInput:function(e){var t=[E.color.hsl[0],E.color.hsl[1],E.color.hsl[2],E.color.hsl[3]];t[parseInt(e.target.dataset.index)]=parseInt(e.target.value),U(t)},class:"bg-light fl-column p-10 b-r-2 overflow-none"},u("div",{class:"b-r-2 overflow-none"},u("div",{class:"fl-column"},u("form",{class:"fl-column",autocomplete:"off"},u("input",{id:"hsl","data-index":"0",type:"range",class:"w-full m-0",style:"height: 25px; background: linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);",min:"0",max:"359",value:E.color.hsl[0]}))),u("div",{class:"fl-column"},u("form",{class:"fl-column",autocomplete:"off"},u("input",{value:E.color.hsl[1],"data-index":"1",type:"range",class:"w-full m-0",style:"height: 25px; background: linear-gradient(to right, hsl("+E.color.hsl[0]+", 0%, 50%) 0%,hsl("+E.color.hsl[0]+", 100%, 50%) 100%);"}))),u("div",{class:"fl-column"},u("form",{class:"fl-column",autocomplete:"off"},u("input",{value:E.color.hsl[2],"data-index":"2",type:"range",class:"w-full m-0",style:"height: 25px; background: linear-gradient(to right, hsl("+E.color.hsl[0]+", 100%, 0%) 0%, hsl("+E.color.hsl[0]+", 100%, 50%) 50%, hsl("+E.color.hsl[0]+", 100%, 100%) 100%)"}))))),u("div",{class:"p-h-10 bord-dark-b",style:"padding-bottom: 10px;"},u("div",{class:"fl fl-wrap b-r-2 overflow-none",style:"align-content: baseline;"},E.palette.map((function(e){return u("button",{onClick:function(){N(e)},class:"m-0",style:"\n                  width: 44px;\n                  min-height: 25px;\n                  background: rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+");\n                  border: "+(E.color.rgb[0]===e[0]&&E.color.rgb[1]===e[1]&&E.color.rgb[2]===e[2]&&E.color.rgb[3]===e[3]?"2px solid rgba(61,61,61, 1)":"2px solid rgba(61,61,61, 0)")+";\n                  box-shadow: inset 0px 0px 0px 1px rgba(255, 255, 255, "+(E.color.rgb[0]===e[0]&&E.color.rgb[1]===e[1]&&E.color.rgb[2]===e[2]&&E.color.rgb[3]===e[3]?"255":"0")+");\n                "})})))))},K=function(e){E.tool=e,T.render()},O=function(e,t,n,r,o){var l=Math.abs(n-e),a=Math.abs(r-t),i=n-e>=0?1:-1,s=r-t>=0?1:-1,c=e,d=t,u=l>=a?l:a;l/=u,a/=u;for(var f=0;f<u;)o(Math.floor(c),Math.floor(d)),c+=l*i,d+=a*s,f+=1;o(Math.floor(c),Math.floor(d))},F=function(e,t,n,r,o){var l=Math.floor(Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)));if(!(l<=0)){var a=0,i=l,s=1-l,c=function(){o(e+a,t+i),o(e+i,t+a),o(e-a,t+i),o(e-i,t+a),o(e+a,t-i),o(e+i,t-a),o(e-a,t-i),o(e-i,t-a)};for(c();a<=i;)a++,s<0?s+=2*a+1:(i--,s+=2*(a-i)+1),c()}};var H=function(e,t,n,r,o){var l=Math.abs(n-e),a=Math.abs(r-t),i=n-e>=0?1:-1,s=r-t>=0?1:-1,c=e,d=t,u=0;for(o(c,d);u<l;)o(c+=1*i,t),o(c,t+a*s),u+=1;for(u=0;u<a;)o(e,d+=1*s),o(e+l*i,d),u+=1},j=function(e){T.canvasPreview.ctx.clearRect(0,0,E.width,E.height),T.canvasPreview.imgData=T.canvasPreview.ctx.getImageData(0,0,E.width,E.height);var t=E.layers[E.layerActive].frames[E.frameActive].data,n=T.canvasPreview.imgData.data,r=T.canvasView.dom.getBoundingClientRect(),o=r.width/T.canvasView.dom.width,l=r.height/T.canvasView.dom.height,a=Math.floor((T.window.startX-r.x)/o),i=Math.floor((T.window.startY-r.y)/l),s=Math.floor((T.window.prevX-r.x)/o),c=Math.floor((T.window.prevY-r.y)/l),d=Math.floor((T.window.currX-r.x)/o),u=Math.floor((T.window.currY-r.y)/l),f=function(e,t,n,r,o,l){!function(e,t,n,r,o,l,a,i){for(var s=Math.abs(n-e),c=Math.abs(r-t),d=n-e>=0?1:-1,u=r-t>=0?1:-1,f=e,v=t,p=0,h=0;p<=s;){for(h=0,v=t;h<=c;)i(f,v),v+=1*u,h+=1;f+=1*d,p+=1}}(t-T.brushSize,n-T.brushSize,t+T.brushSize,n+T.brushSize,0,0,0,(function(t,n){!function(e,t,n,r,o,l){if(!e)throw Error("setPoint: "+e+" undefined");if(!e.length)throw Error("setPoint: "+e+" not a valid array");if(t>=0&&t<r&&n>=0&&n<o){var a=4*(t+r*n);e[a+0]=l[0],e[a+1]=l[1],e[a+2]=l[2],e[a+3]=l[3]}}(e,t,n,r,o,l)}))};if("hover"===e&&"eye-dropper"!==E.tool&&"move"!==E.tool)return f(n,d,u,E.width,E.height,"eraser"!==E.tool?E.color.rgb:[0,0,0,50]),void T.render();if("start"===e&&"eye-dropper"!==E.tool){var v=new ImageData(E.width,E.height);v.data.set(E.layers[E.layerActive].frames[E.frameActive].data);var p=E.layerActive,h=E.frameActive;X(E.tool),T.currUndoRef.undo=function(){E.frameActive=h,E.layerActive=p,E.layers[p].frames[h].data.set(v.data)}}if("end"===e&&"eye-dropper"===E.tool){var g=function(e,t,n,r,o){if(!e)throw Error("setPoint: "+e+" undefined");if(!e.length)throw Error("setPoint: "+e+" not a valid array");if(t>=0&&t<r&&n>=0&&n<o){var l=4*(t+r*n);return[e[l+0],e[l+1],e[l+2],e[l+3]]}return[0,0,0,0]}(t,d,u,E.width,E.height);0!==g[3]&&N(g)}("end"===e&&"fill"===E.tool&&function(e,t,n,r,o,l){var a=4*(n*r+t),i=[{x:t,y:n}],s=function(e,t,n,r){var o=4*(n*r+t);return[e[o+0],e[o+1],e[o+2],e[o+3]]}(e,t,n,r);if(!function(e,t,n,r){return e[t+0]===n[r+0]&&e[t+1]===n[r+1]&&e[t+2]===n[r+2]&&e[t+3]===n[r+3]}(l,0,s,0))for(;i.length>0;){var c=i.shift(),d=c.x,u=c.y;for(a=4*(u*r+d);u-- >=0&&e[a+0]===s[0]&&e[a+1]===s[1]&&e[a+2]===s[2]&&e[a+3]===s[3];)a-=4*r;a+=4*r,u++;for(var f=!1,v=!1;u++<o&&e[a+0]===s[0]&&e[a+1]===s[1]&&e[a+2]===s[2]&&e[a+3]===s[3];)e[a+0]=l[0],e[a+1]=l[1],e[a+2]=l[2],e[a+3]=l[3],d>0&&(e[a-4+0]===s[0]&&e[a-4+1]===s[1]&&e[a-4+2]===s[2]&&e[a-4+3]===s[3]?f||(i.push({x:d-1,y:u}),f=!0):f&&(f=!1)),d<r-1&&(e[a+4+0]===s[0]&&e[a+4+1]===s[1]&&e[a+4+2]===s[2]&&e[a+4+3]===s[3]?v||(i.push({x:d+1,y:u}),v=!0):v&&(v=!1)),a+=4*r}}(t,d,u,E.width,E.height,E.color.rgb),"pencil"!==E.tool&&"eraser"!==E.tool||("eraser"===E.tool&&f(n,d,u,E.width,E.height,[0,0,0,50]),O(s,c,d,u,(function(e,n){f(t,e,n,E.width,E.height,"pencil"===E.tool?E.color.rgb:[0,0,0,0])}))),"line"===E.tool||"circle"===E.tool||"square"===E.tool)&&{line:O,circle:F,square:H}[E.tool](a,i,d,u,(function(r,o){f("start"===e||"resume"===e?n:t,r,o,E.width,E.height,E.color.rgb)}));if("move"===E.tool&&("start"===e&&(T.canvasSelection.ctx.putImageData(E.layers[E.layerActive].frames[E.frameActive],0,0),T.canvasSelection.imgData=T.canvasSelection.ctx.getImageData(0,0,E.width,E.height),T.canvasPreview.ctx.putImageData(T.canvasSelection.imgData,0,0),T.canvasPreview.imgData=T.canvasPreview.ctx.getImageData(0,0,E.width,E.height),E.layers[E.layerActive].frames[E.frameActive]=new ImageData(E.width,E.height)),"resume"===e&&(T.canvasPreview.ctx.putImageData(T.canvasSelection.imgData,s-a,c-i),T.canvasPreview.imgData=T.canvasPreview.ctx.getImageData(0,0,E.width,E.height)),"end"===e&&(T.canvasPreview.ctx.putImageData(T.canvasSelection.imgData,s-a,c-i),T.canvasPreview.imgData=T.canvasPreview.ctx.getImageData(0,0,E.width,E.height),E.layers[E.layerActive].frames[E.frameActive]=T.canvasPreview.ctx.getImageData(0,0,E.width,E.height),T.canvasPreview.ctx.clearRect(0,0,E.width,E.height),T.canvasPreview.imgData=T.canvasPreview.ctx.getImageData(0,0,E.width,E.height))),"end"===e&&"eye-dropper"!==E.tool){var m=new ImageData(E.width,E.height);m.data.set(E.layers[E.layerActive].frames[E.frameActive].data);var w=E.layerActive,y=E.frameActive;T.currUndoRef.redo=function(){E.frameActive=y,E.layerActive=w,E.layers[w].frames[y].data.set(m.data)}}T.render()},G=function(){return u("div",{id:"canvas-inner-scroll","data-request":"paintCanvas","data-hover":"paintCanvas",class:"fl fl-center fl-1",style:"width: 1920px; height: 1920px;"},u("canvas",{id:"canvas-view",width:E.width,height:E.height,style:"width: 1920px; height: 1920px; transform: scale(.25); pointer-events: none;"}))},W={metaKey:{z:Y},shiftKey:{metaKey:{z:R}},b:function(){K("pencil")},e:function(){K("eraser")},u:function(){K("line")},g:function(){K("fill")},l:function(){K("eye-dropper")},v:function(){K("move")}},B=Date.now(),$=Date.now(),J=Date.now(),Q=function(e,t){void 0===e&&console.error("setTargetCanvas - no frame given"),void 0===t&&console.error("setTargetCanvas - no layer given"),E.frameActive=e,E.layerActive=t,T.render()},Z=function(e,t,n){var r="insert"===e||"duplicate"===e;function o(e,t,n,r){"insert"===e&&t.splice(n+1,0,r),"delete"===e&&t.splice(n,1)}"layer"===t&&("insert"===e&&o(e,E.layers,E.layerActive,n),"delete"===e&&o(e,E.layers,E.layerActive)),"frame"===t&&("insert"===e&&E.layers.forEach((function(t,r){var l=new ImageData(E.width,E.height);l.data.set(n[r].data),o(e,t.frames,E.frameActive,l)})),"delete"===e&&E.layers.forEach((function(t){o(e,t.frames,E.frameActive)}))),E[t+"Count"]+=r?1:-1,r&&(E[t+"Active"]+=1),"delete"===e&&E[t+"Active"]===E[t+"Count"]&&(E[t+"Active"]-=1)},ee=function(e){var t=e.type,n=e.request,r=e.requestType,o=e.data,l=e.disableUndoRedo,a=E.layerActive,i=E.frameActive,s=E.layerCount,c=E.frameCount;l||(X(n,t),T.currUndoRef.redo=function(){E.frameCount=c,E.layerCount=s,E.frameActive=i,E.layerActive=a,ee({type:t,request:n,requestType:r,data:o,disableUndoRedo:!0})});var d="layer"===t?{name:"Layer "+(s+1),hidden:!1,frames:new Array(c).fill(void 0).map((function(e){return new ImageData(E.width,E.height)}))}:new Array(E.layerCount).fill(void 0).map((function(e){return new ImageData(E.width,E.height)})),u="layer"===t?{name:E.layers[a].name+" "+("clone"===r?"(Copy)":""),hidden:!1,frames:new Array(c).fill(void 0).map((function(e,t){var n=new ImageData(E.width,E.height);return n.data.set(E.layers[a].frames[t].data),n}))}:new Array(s).fill(void 0).map((function(e,t){var n=new ImageData(E.width,E.height);return n.data.set(E.layers[t].frames[i].data),n}));"layer"!==t&&"frame"!==t||"new"!==r&&"clone"!==r||Z("insert",t,"new"===r?d:u),"layer"!==t&&"frame"!==t||"delete"!==n||(E[t+"Count"]-1==0?(Z("delete",t),"layer"===t&&(d.name="Layer 1"),Z("insert",t,d)):Z("delete",t));var f=E.layerActive,v=E.frameActive,p=E.layerCount,h=E.frameCount;l||(T.currUndoRef.undo=function(){E.frameCount=h,E.layerCount=p,"layer"===t&&(E.frameActive=v,"insert"===n&&(E.layerActive=f,Z("delete",t)),"delete"===n&&1!==s&&(E.layerActive=a-1,Z("insert",t,u)),"delete"===n&&1===s&&(Z("delete",t),Z("insert",t,u))),"frame"===t&&(E.layerActive=f,"insert"===n&&(E.frameActive=v,Z("delete",t)),"delete"===n&&1!==c&&(E.frameActive=i-1,Z("insert",t,u)),"delete"===n&&1===c&&(Z("delete",t),Z("insert",t,u)))}),T.render()},te=function(e,t){var n="up"===t?-1:1,r="layer"===e?"layerActive":"frameActive",o="layer"===e?E.layerCount:E.frameCount;if(E[r]+n!==-1&&E[r]+n!==o){if("layer"===e){var l=E.layers[E.layerActive+n];E.layers[E.layerActive+n]=E.layers[E.layerActive],E.layers[E.layerActive]=l}"frame"===e&&E.layers.forEach((function(e){var t=e.frames[E.frameActive+n];e.frames[E.frameActive+n]=e.frames[E.frameActive],e.frames[E.frameActive]=t})),E[r]+=n,T.render()}},ne=function(){E.frameActive=(E.frameActive+1)%E.frameCount,T.render(),T.timerID=setTimeout(ne,100)},re=function(){return u("div",{class:"bg-light bord-dark-t fl-column",style:"height: 250px;"},u("div",{class:"fl w-full bord-dark-b h-30"},u("div",{class:"fl fl-justify-between bord-dark-r",style:"width: 210px;"},u("div",{class:"fl"},u("button",{onClick:function(){E.layerCount<30&&ee({type:"layer",request:"insert",requestType:"new"})},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/insert.svg"})),u("button",{onClick:function(){ee({type:"layer",request:"insert",requestType:"clone"})},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/clone.svg"})),u("button",{onClick:function(){te("layer","down")},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/up.svg"})),u("button",{onClick:function(){te("layer","up")},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/down.svg"})),u("button",{onClick:function(){ee({type:"layer",request:"delete"})},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/delete.svg"})))),u("div",{class:"fl fl-1"},u("div",{class:"fl"},u("button",{onClick:function(){T.onionSkinning=!T.onionSkinning,T.render()},class:"fl fl-center m-0 p-0 w-30 bord-dark-r",style:T.onionSkinning?"background: rgba(52, 152, 219, 255);":""},u("img",{src:"img/onion.svg"}))),u("div",{class:"fl-1 fl fl-justify-center"},u("div",{class:"fl"},u("button",{onClick:function(){E.frameActive=E.frameActive-1==-1?E.frameCount-1:E.frameActive-1,T.render()},class:"fl fl-center m-0 p-0 w-30 bord-dark-r bord-dark-l"},u("img",{src:"img/lastframe.svg"})),u("button",{onClick:function(){1!==E.frameCount&&(T.isPlaying?clearTimeout(T.timerID):ne(),T.isPlaying=!T.isPlaying,T.render())},class:"fl fl-center m-0 p-0 w-30 bord-dark-r"},u("img",{src:"img/"+(T.isPlaying?"stop.svg":"play.svg")})),u("button",{onClick:function(){E.frameActive=(E.frameActive+1)%E.frameCount,T.render()},class:"fl fl-center m-0 p-0 w-30 bord-dark-r"},u("img",{src:"img/nextframe.svg"})))),u("div",{class:"fl"},u("button",{onClick:function(){!T.isPlaying&&E.frameCount<50&&ee({type:"frame",request:"insert",requestType:"new"})},class:"w-30 fl fl-center bord-dark-r bord-dark-l"},u("img",{src:"img/insert.svg"})),u("button",{onClick:function(){ee({type:"frame",request:"insert",requestType:"clone"})},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/clone.svg"})),u("button",{onClick:function(){T.isPlaying||te("frame","up")},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/up.svg",style:"transform: rotate(-90deg);"})),u("button",{onClick:function(){T.isPlaying||te("frame","down")},class:"w-30 fl fl-center bord-dark-r"},u("img",{src:"img/down.svg",style:"transform: rotate(-90deg);"})),u("button",{onClick:function(){T.isPlaying||ee({type:"frame",request:"delete"})},class:"w-30 fl fl-center"},u("img",{src:"img/delete.svg"}))))),u("div",{class:"fl bg-mid",style:"height: calc(100% - 30px);"},u("div",{id:"layers",class:"overflow hide-scroll",style:"padding-bottom: 30px;"},u("div",{class:"bord-dark-r fl-col-reverse",style:"width: 210px;"},E.layers.map((function(e,t){return u("div",{class:"fl bord-dark-b h-30",style:"background: "+(E.layerActive===t?"rgb(100, 100, 100)":"")+";"},u("button",{style:e.hidden?"background: rgba(52, 152, 219, 255);":"",onClick:function(){!function(e){E.layers[e].hidden=!E.layers[e].hidden,T.render()}(t)},class:"w-30 h-30 fl fl-center bord-dark-b"},u("img",{src:"img/"+(e.hidden?"eye-active.svg":"eye.svg")})),u("button",{onClick:function(){Q(E.frameActive,t)},class:"fl-1 txt-left"},u("small",{style:"font-size: 11px;"},u("b",null,e.name))))})))),u("div",{id:"frames",class:"fl-1 overflow hide-scroll",style:"padding-bottom: 30px;"},u("div",{class:"fl-col-reverse"},E.layers.map((function(e,t){return u("div",{class:"fl"},e.frames.map((function(e,n){return u("button",{onClick:function(){Q(n,t)},class:"w-30 h-30 fl fl-center bord-dark-r bord-dark-b bg-light rel",style:"\n                            background: "+(E.frameActive===n&&E.layerActive===t?"rgba(52, 152, 219, 255)":E.frameActive===n||E.layerActive===t?"rgba(100, 100, 100, 255)":"rgba(0, 0, 0, 0)")+";"},u("div",{class:"abs bottom right p-5"},u("small",{style:"font-size: 8px;"},u("b",null,n+1))))})))}))))))},oe=function(){localforage.setItem("pixel-art-app",E).then((function(e){})).catch((function(e){console.log(e)}))},le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentDidMount=function(){var e=this;function t(){dataLayer.push(arguments)}T.render=function(){e.setState({},(function(){T.canvasTemp.ctx.clearRect(0,0,E.width,E.height),T.canvasFinal.ctx.clearRect(0,0,E.width,E.height),T.canvasView.ctx.clearRect(0,0,E.width,E.height),E.layers.forEach((function(e,t){if(T.canvasView.ctx.globalAlpha=1,!e.hidden){if(E.layerActive===t&&T.onionSkinning&&!T.isPlaying){T.canvasView.ctx.globalAlpha=.5;for(var n=-3;n<3;n++)if(e.frames[E.frameActive-n]){var r=e.frames[E.frameActive-n];T.canvasTemp.ctx.putImageData(r,0,0),T.canvasView.ctx.drawImage(T.canvasTemp.dom,0,0)}}T.canvasView.ctx.globalAlpha=1;for(var o=e.frames[E.frameActive],l=0;l<2;l++)T.canvasTemp.ctx.putImageData(o,0,0),T.canvasView.ctx.drawImage(T.canvasTemp.dom,0,0),E.layerActive===t&&(T.canvasTemp.ctx.putImageData(T.canvasPreview.imgData,0,0),T.canvasView.ctx.drawImage(T.canvasTemp.dom,0,0))}}))}))},q(),this.funcs={paintCanvas:j},this.canvasOuterScroll=document.querySelector("#canvas-outer-scroll"),this.canvasInnerScroll=document.querySelector("#canvas-inner-scroll"),this.timelineScroll={isSyncingLeftScroll:!1,isSyncingRightScroll:!1,leftDiv:document.querySelector("#layers"),rightDiv:document.querySelector("#frames")},this.timelineScrollController(),this.centerCanvas(),window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","UA-144729452-1")},t.prototype.centerCanvas=function(){var e=this.canvasOuterScroll.offsetWidth,t=this.canvasInnerScroll.offsetWidth,n=this.canvasOuterScroll.offsetHeight,r=this.canvasInnerScroll.offsetHeight;this.canvasOuterScroll.scrollLeft=Math.floor((t-e)/2)+8,this.canvasOuterScroll.scrollTop=Math.floor((r-n)/2)+8},t.prototype.timelineScrollController=function(){var e=this;this.timelineScroll.leftDiv.addEventListener("scroll",(function(t){e.timelineScroll.isSyncingLeftScroll||(e.timelineScroll.isSyncingRightScroll=!0,e.timelineScroll.rightDiv.scrollTop=t.target.scrollTop),e.timelineScroll.isSyncingLeftScroll=!1})),this.timelineScroll.rightDiv.addEventListener("scroll",(function(t){e.timelineScroll.isSyncingRightScroll||(e.timelineScroll.isSyncingLeftScroll=!0,e.timelineScroll.leftDiv.scrollTop=t.target.scrollTop),e.timelineScroll.isSyncingRightScroll=!1}))},t.prototype.onGestureDown=function(e){T.isPlaying||(T.window.request=e.target.dataset.request||""),T.window.mouseDown=!0,T.window.startX=void 0===e.pageX?e.touches[0].pageX:e.pageX,T.window.startY=void 0===e.pageY?e.touches[0].pageY:e.pageY,T.window.prevX=void 0===e.pageX?e.touches[0].pageX:e.pageX,T.window.prevY=void 0===e.pageY?e.touches[0].pageY:e.pageY,T.window.currX=void 0===e.pageX?e.touches[0].pageX:e.pageX,T.window.currY=void 0===e.pageY?e.touches[0].pageY:e.pageY,T.window.request&&this.funcs[T.window.request]("start")},t.prototype.onGestureDrag=function(e){T.isPlaying||(T.window.prevX=T.window.currX),T.window.prevY=T.window.currY,T.window.currX=void 0===e.pageX?e.touches[0].pageX:e.pageX,T.window.currY=void 0===e.pageY?e.touches[0].pageY:e.pageY,T.window.request&&this.funcs[T.window.request]("resume"),"INPUT"!==e.target.tagName&&e.preventDefault()},t.prototype.onGestureEnd=function(e){T.isPlaying||T.window.request&&this.funcs[T.window.request]("end"),T.window.request="",T.window.mouseDown=!1,T.window.startX=0,T.window.startY=0,T.window.prevX=0,T.window.prevY=0,T.window.currX=0,T.window.currY=0,setTimeout((function(){oe()}),50)},t.prototype.onGestureHover=function(e){T.isPlaying||(T.window.prevX=T.window.currX),T.window.prevY=T.window.currY,T.window.currX=void 0===e.pageX?e.touches[0].pageX:e.pageX,T.window.currY=void 0===e.pageY?e.touches[0].pageY:e.pageY,e.target.dataset.hover&&this.funcs[e.target.dataset.hover]("hover")},t.prototype.dragOrHover=function(e){T.window.mouseDown?this.onGestureDrag(e):this.onGestureHover(e)},t.prototype.render=function(){var e=this;return u("div",{class:"h-full relative",onMouseDown:function(t){1===t.which&&e.onGestureDown(t)},onMouseMove:function(t){e.dragOrHover(t)},onMouseUp:function(t){e.onGestureEnd(t)}},u("div",{class:"h-40 bg-light bord-dark-b fl"},u("div",{class:"fl w-full"},u("div",{class:"fl-1 fl"},u("div",{class:"fl bord-dark-r rel w-40",onMouseLeave:function(){T.file.open=!1,T.render()}},u("button",{onClick:function(){T.file.open=!T.file.open,T.render()},class:"fl fl-center m-0 p-0 w-40"},u("img",{src:"img/bars.svg"})),u("div",{class:"bg-light fl-column bord-dark abs z-5",style:"visibility: "+(T.file.open?"visible":"hidden")+"; top: 10px; left: 10px;"},u("button",{onClick:function(){T.newCanvas.open=!0,T.file.open=!1,T.render()},class:"m-0 p-h-15 h-40 fl fl-center-y"},u("img",{src:"img/new.svg"}),u("small",{class:"bold p-h-10",style:"text-transform: capitalize;"},"New")),u("button",{onClick:function(){T.downloadCanvas.open=!0,T.file.open=!1,T.render()},class:"m-0 p-h-15 h-40 fl fl-center-y"},u("img",{src:"img/download.svg"}),u("small",{class:"bold p-h-10",style:"text-transform: capitalize;"},"download")))),u("div",{class:"fl-1 fl fl-justify-center"},u("button",{onClick:function(){Y()},class:"fl fl-center m-0 p-0 w-40 bord-dark-l bord-dark-r"},u("img",{src:"img/undo.svg"})),u("button",{onClick:function(){R()},class:"fl fl-center m-0 p-0 w-40 bord-dark-r"},u("img",{src:"img/redo.svg"})))),u("div",{class:"fl",style:"max-width: 241px; min-width: 241px;"}))),u("div",{class:"fl",style:"height: calc(100% - 40px); "},u("div",{class:"w-40 bg-light bord-dark-r"},["pencil","eraser","line","circle","square","fill","eye-dropper","move"].map((function(e){return u("button",{onClick:function(){K(e)},class:"fl fl-center m-0 p-0 w-40 h-40 bord-dark-r",style:E.tool===e?"background: rgba(52, 152, 219, 255);":""},u("img",{src:"img/"+e+".svg"}))}))),u("div",{class:"fl-column",style:"width: calc(100% - 281px);"},u("div",{id:"canvas-outer-scroll",class:"overflow fl-1 cursor-"+E.tool},u(G,null)),u(re,null)),u("div",{class:"bg-light bord-dark-l fl-column",style:"max-width: 241px; min-width: 241px;"},u("div",{class:"bord-dark-b fl-column overflow"},u("div",{class:"h-30 bg-mid bord-dark-b fl fl-center-y p-h-10"},u("small",null,u("b",null,"Tool"))),u("div",{class:"fl-1 overflow"},u("div",{class:"fl fl-center p-10"},u("small",{class:"bold",style:"width: 150px;"},"Brush Size"),u("select",{onInput:function(e){T.brushSize=parseInt(e.target.value)},value:T.brushSize,class:"w-full"},[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return u("option",{value:t},e)})))))),u(V,null),u("div",{class:"fl-1 bord-dark-b fl-column overflow"},u("div",{class:"h-30 bg-mid bord-dark-b fl fl-center-y p-h-10"},u("small",null,u("b",null,"History"))),u("div",{class:"fl-1 overflow"},T.undo.map((function(e,t){return u("button",{class:"p-h-10 h-30 w-full txt-left fl fl-center-y "+(T.undoPos===t?"bg-xlight":"")},u("img",{width:"10",height:"10",style:"margin-right: 10px;",src:"img/"+e.icon}),u("small",{style:"text-transform: capitalize; font-size: 11px;"},u("b",null,e.action)))})))),u("div",{style:"min-height: 249px; max-height: 249px;"},u("div",{class:"h-30 bg-mid bord-dark-b fl fl-center-y p-h-10"},u("small",null,u("b",null,"Timeline"))),u("div",{class:"overflow fl-1"})))),T.newCanvas.open&&u("div",{class:"abs top left w-full h-full fl fl-justify-center",style:"z-index: 10;"},u("div",{class:"w-full overflow-hidden",style:"max-width: 300px; margin-top: 175px;"},u("div",{class:"fl fl-center bg-mid bord-dark p-v-5",style:"border-top-right-radius: 5px; border-top-left-radius: 5px;"},u("small",null,u("b",null,"New Canvas"))),u("div",{class:"p-10 bg-light bord-dark-l bord-dark-r bord-dark-b",style:"border-bottom-right-radius: 5px; border-bottom-left-radius: 5px;"},u("div",{class:"m-5 p-v-5"},u("div",{class:"fl fl-center"},u("small",{class:"bold",style:"width: 150px;"},"Dimensions"),u("select",{onInput:function(e){var t=e.target.value.split("x");T.newCanvas.w=parseInt(t[0]),T.newCanvas.h=parseInt(t[1])},class:"w-full"},u("option",{value:"32x32"},"32x32"),u("option",{value:"50x50"},"50x50"),u("option",{value:"64x64"},"64x64"),u("option",{value:"100x100"},"100x100"),u("option",{value:"128x128"},"128x128")))),u("div",{class:"fl",style:"padding-top: 5px;"},u("button",{onClick:function(){T.newCanvas.open=!1,T.render()},class:"b-r-2 bold p-5 w-full bg-red m-5"},"Cancel"),u("button",{onClick:function(){L(T.newCanvas.w,T.newCanvas.h),T.newCanvas.open=!1,T.render()},class:"b-r-2 bold p-5 w-full bg-green m-5"},"Confirm"))))),T.downloadCanvas.open&&u("div",{class:"abs top left w-full h-full fl fl-center-x",style:"z-index: 10;"},u("div",{class:"w-full",style:"max-width: 300px; overflow: hidden; margin-top: 175px;"},u("div",{class:"fl fl-center bg-mid bord-dark p-v-5",style:"border-top-right-radius: 5px; border-top-left-radius: 5px;"},u("small",{class:"bold"},"Download")),u("div",{class:"p-10 bg-light bord-dark-l bord-dark-r bord-dark-b",style:"border-bottom-right-radius: 5px; border-bottom-left-radius: 5px;"},u("div",{class:"m-5 p-v-5"},u("div",{class:"fl fl-center"},u("small",{class:"bold",style:"width: 150px;"},"Type"),u("select",{onInput:function(e){T.downloadCanvas.type=e.target.value},value:T.downloadCanvas.type,id:"config-download-size",class:"w-full"},u("option",{value:"frame"},"Frame"),u("option",{value:"spritesheet"},"Spritesheet")))),u("div",{class:"m-5 p-v-5"},u("div",{class:"fl fl-center"},u("small",{class:"bold",style:"width: 150px;"},"Size"),u("select",{onInput:function(e){T.downloadCanvas.size=parseInt(e.target.value)},value:T.downloadCanvas.size,id:"config-download-size",class:"w-full"},u("option",{value:"2"},"2x"),u("option",{value:"4"},"4x"),u("option",{value:"8"},"8x"),u("option",{value:"16"},"16x"),u("option",{value:"32"},"32x"),u("option",{value:"64"},"64x")))),u("div",{class:"fl",style:"padding-top: 5px;"},u("button",{onClick:function(){T.downloadCanvas.open=!1,T.render()},class:"b-r-2 bold p-5 w-full bg-red m-5"},"Cancel"),u("a",{onClick:function(e){!function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=E.height*T.downloadCanvas.size,o=E.width*T.downloadCanvas.size;if("frame"===T.downloadCanvas.type&&(t.width=o,t.height=r,n.webkitImageSmoothingEnabled=!1,n.mozImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,E.layers.forEach((function(e){T.canvasTemp.ctx.putImageData(e.frames[E.frameActive],0,0),n.drawImage(T.canvasView.dom,0,0,t.width,t.height)}))),"spritesheet"===T.downloadCanvas.type){var l=E.width*T.downloadCanvas.size*E.frameCount;t.width=l,t.height=r,n.webkitImageSmoothingEnabled=!1,n.mozImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,console.log(E.frameCount);for(var a=function(e){E.layers.forEach((function(t){T.canvasTemp.ctx.putImageData(t.frames[e],0,0),n.drawImage(T.canvasTemp.dom,e*o,0,o,r)}))},i=0;i<E.frameCount;i++)a(i)}var s=t.toDataURL("image/png").replace("image/png","image/octet-stream");e.target.setAttribute("href",s)}(e)},class:"w-full m-5 clickable",download:"pixel-art.png",style:"display: inline-block;"},u("button",{class:"b-r-2 bold p-5 w-full bg-green no-ptr"},"Download")))))))},t}(p);window.addEventListener("load",(function(){var t,n,r;console.log("Program started."),L(64,64,!0),function(t,n,r){var o,s,c;e.__&&e.__(t,n),s=(o=r===l)?null:r&&r.__k||n.__k,t=u(v,null,[t]),c=[],C(n,(o?n:r||n).__k=t,s||a,a,void 0!==n.ownerSVGElement,r&&!o?[r]:s?null:i.slice.call(n.childNodes),c,r||a,o),S(c,t)}(u(le,null),document.body),n=(t={onLoaded:function(){q(),T.render()},onError:function(){}}).onLoaded,r=t.onError,localforage.getItem("pixel-art-app").then((function(e){for(var t in e)E[t]=e[t];n()})).catch((function(e){console.log(e),r()})),window.addEventListener("keydown",(function(e){var t=e.key.toLowerCase();e.repeat||"meta"!==t||($=Date.now()),e.repeat||"shift"!==t||(B=Date.now()),e.repeat||"z"!==t||(J=Date.now()),e.shiftKey&&e.metaKey&&B<$<J&&"z"===t&&W.shiftKey.metaKey.z(),!e.shiftKey&&e.metaKey&&$<J&&"z"===t&&W.metaKey.z(),e.shiftKey&&e.metaKey,e.shiftKey||e.metaKey||!W[e.key.toLowerCase()]||W[e.key.toLowerCase()]()})),window.addEventListener("keyup",(function(){oe()}))})),window.addEventListener("beforeunload",(function(e){e.returnValue="Are you sure you want to leave?"}));
//# sourceMappingURL=bundle.js.map
